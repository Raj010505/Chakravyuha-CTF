#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

void setup() {
    setvbuf(stdout, NULL, _IONBF, 0);
    setvbuf(stdin, NULL, _IONBF, 0);
    setvbuf(stderr, NULL, _IONBF, 0);
}

void stage1() {
    printf("You've passed stage 1!\n");
}

void stage2() {
    printf("You've passed stage 2!\n");
}

void win() {
    printf("Congratulations! Here is your flag: G8KEY{RED_GATE_TRAP}\n");
    fflush(stdout);
    exit(0);
}

void vuln() {
    char buffer[64];
    printf("Input: ");
    gets(buffer); // Vulnerable function
}

int main() {
    setup();
    printf("Welcome to Binary Gauntlet 1! Reach all functions to win!\n");
    vuln();
    return 0;
}
